<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>

    <style>
        body { padding: 20px; font-family: sans-serif; text-align: center; }
        button {
            width: 100%; height: 80px;
            background: #28a745; color: white;
            font-size: 24px; border: none; border-radius: 12px;
            margin-top: 50px; cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>üö® –¢–ï–°–¢ –ó–í'–Ø–ó–ö–£ üö®</h1>
    <p>–ù–∞—Ç–∏—Å–Ω–∏ –∑–µ–ª–µ–Ω—É –∫–Ω–æ–ø–∫—É. –Ø–∫—â–æ –≤—ñ–∫–Ω–æ –∑–∞–∫—Ä–∏—î—Ç—å—Å—è ‚Äî –ø–µ—Ä–µ–º–æ–≥–∞.</p>

    <button id="sendBtn">–í–Ü–î–ü–†–ê–í–ò–¢–ò –î–ê–ù–Ü</button>

    <script>
        // 1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –Ω–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ –±–∞—á–∏—Ç—å —Å–∞–π—Ç –¢–µ–ª–µ–≥—Ä–∞–º?
        console.log("WebApp InitData:", tg.initData);

        document.getElementById('sendBtn').addEventListener('click', function() {
            try {
                // –•–∞—Ä–¥–∫–æ–¥ –¥–∞–Ω–∏—Ö –¥–ª—è —Ç–µ—Å—Ç—É
                const data = {
                    action: "generate_receipt",
                    name: "Final Test User",
                    lender: "Bank",
                    amount: "999",
                    date: "2026-12-31"
                };

                // 2. –í–Ü–î–ü–†–ê–í–ö–ê
                tg.sendData(JSON.stringify(data));
                
                // 3. üî• –ü–†–ò–ú–£–°–û–í–ï –ó–ê–ö–†–ò–¢–¢–Ø (–í–∏–ø—Ä–∞–≤–ª—è—î –ø—Ä–æ–±–ª–µ–º—É) üî•
                setTimeout(function() {
                    tg.close();
                }, 100); // –ù–µ–≤–µ–ª–∏–∫–∞ –∑–∞—Ç—Ä–∏–º–∫–∞, —â–æ–± –¥–∞–Ω—ñ –≤—Å—Ç–∏–≥–ª–∏ –ø—ñ—Ç–∏
                
            } catch (e) {
                alert("–ü–æ–º–∏–ª–∫–∞: " + e.message);
            }
        });
    </script>
</body>
</html>
