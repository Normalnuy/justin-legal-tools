<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>

    <style>
        body { padding: 20px; font-family: sans-serif; text-align: center; }
        button {
            width: 100%; height: 80px;
            background: #28a745; color: white;
            font-size: 24px; border: none; border-radius: 12px;
            margin-top: 50px; cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>üö® –¢–ï–°–¢ –ó–í'–Ø–ó–ö–£ üö®</h1>
    <p>–ù–∞—Ç–∏—Å–Ω–∏ –∑–µ–ª–µ–Ω—É –∫–Ω–æ–ø–∫—É. –Ø–∫—â–æ –≤—ñ–∫–Ω–æ –∑–∞–∫—Ä–∏—î—Ç—å—Å—è ‚Äî –ø–µ—Ä–µ–º–æ–≥–∞.</p>

    <button id="sendBtn">–í–Ü–î–ü–†–ê–í–ò–¢–ò –î–ê–ù–Ü</button>

    <script>
        // 1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        const tg = window.Telegram.WebApp;
        tg.expand();

        console.log("‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω–æ!");

        // 2. –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–∫—É –∫–ª—ñ–∫—É —á–µ—Ä–µ–∑ JS (–Ω–∞–¥—ñ–π–Ω—ñ—à–µ)
        document.getElementById('sendBtn').addEventListener('click', function() {
            console.log("üñ± –ö–Ω–æ–ø–∫—É –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ!");
            
            try {
                // –•–∞—Ä–¥–∫–æ–¥ –¥–∞–Ω–∏—Ö (–Ω—ñ—è–∫–∏—Ö input, —â–æ–± –≤–∏–∫–ª—é—á–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –∑ ID)
                const data = {
                    action: "generate_receipt",
                    name: "Test User",
                    lender: "Test Lender",
                    amount: "500",
                    date: "2026-01-01"
                };

                console.log("üì§ –í—ñ–¥–ø—Ä–∞–≤–ª—è—é:", data);
                alert("–ó–∞—Ä–∞–∑ –≤—ñ–∫–Ω–æ –º–∞—î –∑–∞–∫—Ä–∏—Ç–∏—Å—è...");
                
                // –í–Ü–î–ü–†–ê–í–ö–ê
                tg.sendData(JSON.stringify(data));
                
            } catch (e) {
                console.error("‚ùå –ü–æ–º–∏–ª–∫–∞:", e);
                alert("–ü–æ–º–∏–ª–∫–∞: " + e.message);
            }
        });
    </script>
</body>
</html>
