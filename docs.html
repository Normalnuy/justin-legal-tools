<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Mode</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>

    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f0f0; }
        .btn { 
            display: block; width: 100%; padding: 20px; 
            background: #007bff; color: white; 
            font-size: 20px; border: none; border-radius: 10px; margin-top: 20px;
        }
        input { width: 100%; padding: 10px; margin-top: 5px; box-sizing: border-box; }
    </style>
</head>
<body>

    <h2>üõ† –†–µ–∂–∏–º –≤—ñ–¥–ª–∞–¥–∫–∏</h2>
    <p>–í–Ω–∏–∑—É –µ–∫—Ä–∞–Ω—É –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è —ñ–∫–æ–Ω–∫–∞ ‚öôÔ∏è</p>

    <label>–¢–µ—Å—Ç–æ–≤–µ –ø–æ–ª–µ:</label>
    <input type="text" id="debug_name" value="User Test">

    <button class="btn" onclick="tryToSend()">üî¥ –ù–ê–¢–ò–°–ù–ò –ú–ï–ù–ï</button>

    <script>
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        const tg = window.Telegram.WebApp;
        tg.expand();

        console.log("–°–∫—Ä–∏–ø—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!"); // –¶–µ –±—É–¥–µ –≤–∏–¥–Ω–æ –≤ Eruda

        function tryToSend() {
            console.log("–ö–Ω–æ–ø–∫—É –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ!"); 

            try {
                const nameVal = document.getElementById("debug_name").value;
                
                if (!nameVal) {
                    console.error("–ü–æ–ª–µ –ø—É—Å—Ç–µ!");
                    alert("–ü–æ–ª–µ –ø—É—Å—Ç–µ!");
                    return;
                }

                const data = {
                    action: "generate_receipt",
                    name: nameVal,
                    // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è —ñ–Ω—à–∏—Ö –ø–æ–ª—ñ–≤, —â–æ–± Python –Ω–µ –ª–∞—è–≤—Å—è
                    lender: "Debug Lender",
                    amount: "100",
                    date: "2026-01-01"
                };

                console.log("–í—ñ–¥–ø—Ä–∞–≤–ª—è—é –¥–∞–Ω—ñ:", data);
                tg.sendData(JSON.stringify(data));

            } catch (err) {
                console.error("–ö–†–ò–¢–ò–ß–ù–ê –ü–û–ú–ò–õ–ö–ê:", err);
                alert("ERR: " + err.message);
            }
        }
    </script>
</body>
</html>
